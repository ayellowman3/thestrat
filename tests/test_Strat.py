import unittest
import sys,os
sys.path.append(f".{os.sep}/production")
import Strat
import Candle


class TestStrat(unittest.TestCase):
    def setUp(self):
        self.candles = []
        self.candles.append(Candle.Candle("AAPL", 145.44, 145.44, 145, 145))
        self.candles.append(Candle.Candle("AAPL", 145, 145, 144.82, 144.82))
        self.candles.append(Candle.Candle("AAPL", 144.79, 144.79, 144.37, 144.37))
        self.candles.append(Candle.Candle("AAPL", 144.48, 144.71, 144.37, 144.71))
        self.candles.append(Candle.Candle("AAPL", 144.69, 144.86, 144.69, 144.86))
        self.candles.append(Candle.Candle("AAPL", 144.84, 144.92, 144.84, 144.92))
        self.candles.append(Candle.Candle("AAPL", 144.8, 144.8, 144.65, 144.65))
        self.candles.append(Candle.Candle("AAPL", 144.72, 144.9, 144.72, 144.88))
        self.candles.append(Candle.Candle("AAPL", 144.82, 144.84, 144.81, 144.81))
        self.candles.append(Candle.Candle("AAPL", 144.89, 144.89, 144.77, 144.77))
        self.candles.append(Candle.Candle("AAPL", 144.75, 144.75, 144.61, 144.61))
        self.candles.append(Candle.Candle("AAPL", 144.61, 144.61, 144.4, 144.57))
        self.candles.append(Candle.Candle("AAPL", 144.62, 144.83, 144.62, 144.77))
        self.candles.append(Candle.Candle("AAPL", 144.62, 144.62, 144.6, 144.6))
        self.candles.append(Candle.Candle("AAPL", 144.57, 144.71, 144.57, 144.71))
        self.candles.append(Candle.Candle("AAPL", 144.88, 144.88, 144.77, 144.77))
        self.candles.append(Candle.Candle("AAPL", 144.8, 144.85, 144.8, 144.8))
        self.candles.append(Candle.Candle("AAPL", 144.88, 144.94, 144.88, 144.93))
        self.candles.append(Candle.Candle("AAPL", 144.94, 145, 144.9, 144.95))
        self.candles.append(Candle.Candle("AAPL", 144.91, 144.95, 144.83, 144.86))
        self.candles.append(Candle.Candle("AAPL", 144.89, 144.95, 144.83, 144.95))
        self.candles.append(Candle.Candle("AAPL", 144.99, 145, 144.77, 144.77))
        self.candles.append(Candle.Candle("AAPL", 144.84, 144.86, 144.78, 144.78))
        self.candles.append(Candle.Candle("AAPL", 144.8, 144.8, 144.7, 144.8))
        self.candles.append(Candle.Candle("AAPL", 144.96, 145.8, 144.3115, 144.6797))
        self.candles.append(Candle.Candle("AAPL", 144.61, 144.83, 144.51, 144.63))
        self.candles.append(Candle.Candle("AAPL", 144.61, 144.68, 144.45, 144.6))
        self.candles.append(Candle.Candle("AAPL", 144.63, 144.83, 144.55, 144.76))
        self.candles.append(Candle.Candle("AAPL", 144.72, 144.82, 144.61, 144.64))
        self.candles.append(Candle.Candle("AAPL", 144.67, 144.68, 144.32, 144.35))
        self.candles.append(Candle.Candle("AAPL", 144.33, 144.42, 144.08, 144.08))
        self.candles.append(Candle.Candle("AAPL", 144.06, 144.08, 143.67, 143.92))
        self.candles.append(Candle.Candle("AAPL", 143.94, 144.14, 143.82, 144.02))
        self.candles.append(Candle.Candle("AAPL", 144.075, 144.835, 143.915, 144.0682))
        self.candles.append(Candle.Candle("AAPL", 144.07, 145.14, 143.97, 145.05))
        self.candles.append(Candle.Candle("AAPL", 145.04, 145.33, 143.98, 145.195))
        self.candles.append(Candle.Candle("AAPL", 145.19, 145.3, 144.1, 144.1401))
        self.candles.append(Candle.Candle("AAPL", 144.15, 144.55, 143.57, 143.715))
        self.candles.append(Candle.Candle("AAPL", 143.7, 143.89, 143.351, 143.415))
        self.candles.append(Candle.Candle("AAPL", 143.41, 143.5101, 143.01, 143.4255))
        self.candles.append(Candle.Candle("AAPL", 143.42, 143.98, 143.31, 143.65))
        self.candles.append(Candle.Candle("AAPL", 143.6501, 143.86, 143.48, 143.61))
        self.candles.append(Candle.Candle("AAPL", 143.59, 144, 143.54, 143.8567))
        self.candles.append(Candle.Candle("AAPL", 143.86, 144.23, 143.76, 144.19))
        self.candles.append(Candle.Candle("AAPL", 144.19, 144.43, 144.02, 144.14))
        self.candles.append(Candle.Candle("AAPL", 144.15, 144.48, 143.95, 144.45))
        self.candles.append(Candle.Candle("AAPL", 144.45, 144.48, 143.86, 143.9102))
        self.candles.append(Candle.Candle("AAPL", 143.915, 144.408, 143.44, 144.38))
        self.candles.append(Candle.Candle("AAPL", 144.4, 144.98, 144.01, 144.8801))
        self.candles.append(Candle.Candle("AAPL", 144.88, 145.5299, 144.855, 145.42))
        self.candles.append(Candle.Candle("AAPL", 145.42, 145.44, 145.02, 145.09))
        self.candles.append(Candle.Candle("AAPL", 145.09, 145.2274, 144.94, 145.1801))
        self.candles.append(Candle.Candle("AAPL", 145.19, 145.84, 145.04, 145.82))
        self.candles.append(Candle.Candle("AAPL", 145.81, 145.905, 145.39, 145.445))
        self.candles.append(Candle.Candle("AAPL", 145.45, 145.85, 145.36, 145.58))
        self.candles.append(Candle.Candle("AAPL", 145.59, 145.9481, 145.57, 145.9481))
        self.candles.append(Candle.Candle("AAPL", 145.945, 146.26, 145.78, 145.8655))
        self.candles.append(Candle.Candle("AAPL", 145.86, 145.9078, 145.595, 145.88))
        self.candles.append(Candle.Candle("AAPL", 145.89, 145.98, 145.6229, 145.91))
        self.candles.append(Candle.Candle("AAPL", 145.92, 145.97, 145.32, 145.3471))
        self.candles.append(Candle.Candle("AAPL", 145.345, 145.72, 145.27, 145.62))
        self.candles.append(Candle.Candle("AAPL", 145.61, 146.105, 145.56, 146.065))
        self.candles.append(Candle.Candle("AAPL", 146.06, 146.0675, 145.69, 145.9599))
        self.candles.append(Candle.Candle("AAPL", 145.96, 146.115, 145.74, 145.965))
        self.candles.append(Candle.Candle("AAPL", 145.97, 146.1293, 145.855, 145.965))
        self.candles.append(Candle.Candle("AAPL", 145.97, 146.46, 145.88, 146.4155))
        self.candles.append(Candle.Candle("AAPL", 146.415, 146.93, 146.415, 146.765))
        self.candles.append(Candle.Candle("AAPL", 146.765, 147.38, 146.65, 147.255))
        self.candles.append(Candle.Candle("AAPL", 147.24, 147.2693, 146.71, 146.765))
        self.candles.append(Candle.Candle("AAPL", 146.77, 147.02, 146.74, 146.9))
        self.candles.append(Candle.Candle("AAPL", 146.88, 147.09, 146.71, 146.78))
        self.candles.append(Candle.Candle("AAPL", 146.78, 146.78, 145.87, 146.42))
        self.candles.append(Candle.Candle("AAPL", 146.4, 146.8, 146, 146.4))
        self.candles.append(Candle.Candle("AAPL", 146.4, 146.58, 146.35, 146.46))
        self.candles.append(Candle.Candle("AAPL", 146.46, 146.46, 146.32, 146.37))
        self.candles.append(Candle.Candle("AAPL", 146.38, 146.45, 146.31, 146.33))
        self.candles.append(Candle.Candle("AAPL", 146.35, 146.4, 146.24, 146.28))
        self.candles.append(Candle.Candle("AAPL", 146.26, 146.4, 146.23, 146.28))
        self.candles.append(Candle.Candle("AAPL", 146.28, 146.33, 146.18, 146.18))
        self.candles.append(Candle.Candle("AAPL", 146.13, 146.21, 146.11, 146.19))
        self.candles.append(Candle.Candle("AAPL", 146.18, 146.25, 143.98, 146.25))
        self.candles.append(Candle.Candle("AAPL", 146.16, 146.2, 146.11, 146.12))
        self.candles.append(Candle.Candle("AAPL", 146.14, 146.2, 146.08, 146.15))
        self.candles.append(Candle.Candle("AAPL", 146.14, 146.17, 146.1147, 146.15))
        self.candles.append(Candle.Candle("AAPL", 146.15, 146.17, 146.06, 146.06))
        self.candles.append(Candle.Candle("AAPL", 146.08, 146.36, 146.02, 146.27))
        self.candles.append(Candle.Candle("AAPL", 146.27, 146.27, 146.12, 146.19))
        self.candles.append(Candle.Candle("AAPL", 146.22, 146.42, 146.2, 146.3))
        self.candles.append(Candle.Candle("AAPL", 146.29, 146.37, 146.26, 146.3))
        self.candles.append(Candle.Candle("AAPL", 146.35, 146.55, 146.33, 146.4))
        self.candles.append(Candle.Candle("AAPL", 146.5, 146.56, 146.25, 146.47))
        self.candles.append(Candle.Candle("AAPL", 146.45, 146.45, 146.45, 146.45))
        self.candles.append(Candle.Candle("AAPL", 146.49, 146.5, 146.41, 146.41))
        self.candles.append(Candle.Candle("AAPL", 146.43, 146.5, 146.4, 146.5))
        self.candles.append(Candle.Candle("AAPL", 146.5, 146.87, 146.5, 146.82))
        self.candles.append(Candle.Candle("AAPL", 146.8, 147.4, 146.73, 147.31))

    def test_get_label(self):
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 145.44, 145.44, 145, 145),Candle.Candle("AAPL", 145, 145, 144.82, 144.82)),2)
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 145, 145, 144.82, 144.82),Candle.Candle("AAPL", 144.79, 144.79, 144.37, 144.37)),2)
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 144.79, 144.79, 144.37, 144.37),Candle.Candle("AAPL", 144.48, 144.71, 144.37, 144.71)),1)
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 144.48, 144.71, 144.37, 144.71),Candle.Candle("AAPL", 144.69, 144.86, 144.69, 144.86)),2)
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 144.69, 144.86, 144.69, 144.86),Candle.Candle("AAPL", 144.84, 144.92, 144.84, 144.92)),2)
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 144.84, 144.92, 144.84, 144.92),Candle.Candle("AAPL", 144.8, 144.8, 144.65, 144.65)),2)
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 144.8, 144.8, 144.65, 144.65),Candle.Candle("AAPL", 144.72, 144.9, 144.72, 144.88)),2)
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 144.72, 144.9, 144.72, 144.88),Candle.Candle("AAPL", 144.82, 144.84, 144.81, 144.81)),1)
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 144.82, 144.84, 144.81, 144.81),Candle.Candle("AAPL", 144.89, 144.89, 144.77, 144.77)),3)
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 144.89, 144.89, 144.77, 144.77),Candle.Candle("AAPL", 144.75, 144.75, 144.61, 144.61)),2)
        self.assertEqual(Strat.get_label(Candle.Candle("AAPL", 144.75, 144.75, 144.61, 144.61),Candle.Candle("AAPL", 144.61, 144.61, 144.4, 144.57)),2)

if __name__ == '__main__':
    unittest.main()
